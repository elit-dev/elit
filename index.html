<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JMarcel by jhfe</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>JMarcel</h1>
        <p>MVC PHP Framework. Based on Marcel 1.0  Framework</p>

        <p class="view"><a href="https://github.com/jhfe/jmarcel">View the Project on GitHub <small>jhfe/jmarcel</small></a></p>


        <ul>
          <li><a href="https://github.com/jhfe/jmarcel/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jhfe/jmarcel/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jhfe/jmarcel">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="welcome" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>JMarcel MVC-PHP Framework.</h3>

<p>Jmarcel is a small framework developed in PHP, based on the (MVC) Model-View-Controller development pattern </p>



<h3>
<a id="requirements" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h3>
<ul>
    <li> PHP 5.1 or greater</li>
    <li> MySQL 4.1.2 or greater</li>
    <li> The mod_rewrite Apache module</li>
</ul>


<h3>
<a id="download" class="anchor" href="#rather-drive-stick" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download</h3>

<p>You can download the latest version of JMarcel in either <a href="https://github.com/jhfe/jmarcel/zipball/master">ZIP File</a>
    or <a href="https://github.com/jhfe/jmarcel/tarball/master">TAR Ball</a> formats.</p>
<p>You can also clone the project with Git by running:</p>
<pre><code>$ cd your_repo_root/repo_name
$ git clone https://github.com/jhfe/Jmarcel.git
</code></pre>

<h3>
<a id="installation" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<ul>
    <li> Clone or Download JMarcel and extract</li>
    <li> Navigate to application/config/config.php and fill in your base_url</li>
    <li> Point your browser to your base_url and hopefully see a welcome message.</li>
</ul>
<h3>
<a id="documentation" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h3>
        <p>JMarcel is very similar in it's architecture to <a href="http://codeigniter.com/">CodeIgniter</a> and will likely look
        very familiar to you if you already have experince with CodeIgniter. However remember that JMarcel is a tiny framework
        and does not include a lot of the functionality that comes with CodeIgniter.</p>
        
        <h4 id="mvc">Model-View-Controller</h4>
        <p>JMarcel is based on the Model-View-Controller development pattern. MVC is a software approach that separates 
        application logic from presentation. In practice, it permits your web pages to contain minimal scripting since 
        the presentation is separate from the PHP scripting.</p>
        <ul>
            <li><strong>The Model</strong> represents your data structures. Typically your model classes will contain functions that help 
            you retrieve, insert, and update information in your database.</li>
            <li><strong>The View</strong> is the information that is being presented to a user. A View will normally be a web page, but can be
            any type of "page".</li>
            <li><strong>The Controller</strong> serves as an intermediary between the Model, the View, and any other resources needed to process 
            the HTTP request and generate a web page.</li>
        </ul>
        
        <h4 id="folder">Folder Structure</h4>
        <p>With MVC in mind the physical layout of JMarcel is fairly simple. Your application specific files go in the "application"
        folder (you don't need to touch the system folder). Inside the application folder there are folders for all of the specific
        application entities:</p>
        <ul>
            <li>config</li>
            <li>controllers</li>
            <li>helpers</li>
            <li>models</li>
            <li>modules</li>
            <li>plugins</li>
            <li>views</li>
        </ul>
        <p>When JMarcel loads files it assumes they are in the corresponding folders. So make sure you place your files in the correct folders.</p>
        
        <p>We encourage you to use the "static" folder in the root to store you static resource files (CSS, JS etc) however you can put them 
        anywhere. You can also use the <code>BASE_URL</code> variable to help include files in your HTML. For example:</p>
        <pre><code>&lt;link rel="stylesheet" href="&lt;?php echo BASE_URL; ?&gt;static/css/style.css" type="text/css" media="screen" /&gt;</code></pre>
        <h4 id="naming">Naming Conventions</h4>
        <!--<p>All classes in JMarcel use <a href="http://c2.com/cgi/wiki?PascalCase">PascalCase</a> naming. The associated file names must be
        the same except all lower case. So for example the class <code>ThisIsAClass</code> would have the filename <code>thisisaclass.php</code>.
        Underscores in classes must be included in file names as well.</p>-->
        
        <h4 id="urls">URL Structure</h4>
        <p>By default, URLs in JMarcel are designed to be search-engine and human friendly. Rather than using the standard 
        "query string" approach to URLs that is synonymous with dynamic systems, JMarcel uses a segment-based approach:</p>
        
        <pre><code>example.com/class/function/param</code></pre>
        
        <p>By default <code>index.php</code> is hidden in the URL. This is done using the <code>.htaccess</code> file
        in the root directory.</p>
        
        <h4 id="controllers">Controllers</h4>
        <p>Controllers are the driving force of a JMarcel application. As you can see from the <a href="#urls">URL structure</a>, segments of
        the URL are mapped to a class and function. These classes are controllers stored in the "application/controller" directory. So
        for example the URL...</p>
        
        <pre><code>example.com/auth/login</code></pre>
        
        <p>...would map to the following Controller with the filename <code>auth.php</code>:</p>

        <pre><code>&lt;?php 

class Auth extends Controller {

    function index()
    {
        // This is the default function (i.e. no function is set in the URL)
    }
    
    function login()
    {
        echo 'Hello World!';
    }

}

?&gt;</code></pre>

        <p>...and the output would be "Hello World!".</p>
        
        <p>The default controller and error controller can be set in <code>application/config/config.php</code></p>
        
        <p>Note that if you need to declare a contructor you must also call the parent constructor like:</p>
        
        <pre><code>&lt;?php 

class Example extends Controller {

    public function __construct()
    {
        parent::__construct();
        // Your own constructor code
    }

}

?&gt;</code></pre>

        <p>There are several helper functions that can also be used in controllers. Most of these functions take the parameter <code>$name</code>
        of the corresponding class:</p>
        <ul>
            <li><code>loadModel($name)</code> - Load a model</li>
            <li><code>loadView($name)</code> - Load a view</li>
            <li><code>loadPlugin($name)</code> - Load a plugin</li>
            <li><code>loadHelper($name)</code> - Load a helper</li>
            <li><code>redirect($location)</code> - Redirect to a page without having to include the base URL. E.g:
            <pre><code>$this->redirect('some_class/some_function');</code></pre>
            </li>
        </ul>
        
        <h4 id="views">Views</h4>
        <p>In  a view is simply a web page. They can contain everything a normal web page would include. Views are almost
        always loaded by <a href="#controllers">Controllers</a>. So for example if you had a view called <code>main_view.php</code> that
        contained the following HTML:</p>
        
        <pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;My Site&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Welcome to my Site!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

        <p>... you would load it in a controller by doing the following:</p>
        
        <pre><code><?php

class Main extends Controller {
	
    function index()
    {
        $template = $this->loadView('main_view');
        $template->render();
    }
    
}

?></code></pre>

        <p>The View class has a helper function called <code>set($key, $val)</code> that allows you to pass variables from the Controller to the View.</p>
        
        <pre><code>$template = $this->loadView('main_view');
$template->set('someval', 200);
$template->render();</code></pre>

        <p>...then in the view you could do:</p>
        
        <pre><code>&lt;?php echo $someval; ?&gt;</code></pre>
        
        <p>...and the output would be <code>200</code>. Any kind of PHP variable can be passed to a view in this way.</p>
        
        <h3 id="models">Models</h3>
        <p>In JMarcel models are classes whose sole responsiblity it is to deal with data (usually from a database). For example:</p>
        
        <pre><code>&lt;?php

class Example_model extends Model {
	
    public function getSomething($id)
    {
        $id = $this->escapeString($id);
        $result = $this->query('SELECT * FROM something WHERE id="'. $id .'"');
        return $result;
    }

}

?&gt;></code></pre>
        
        ...then in a controller you would do:
        
        <pre><code>function index()
{
    $example = $this->loadModel('Example_model');
    $something = $example->getSomething($id);
    
    $template = $this->loadView('main_view');
    $template->set('someval', $something);
    $template->render();
}</code></pre>

        <p>Now the results of your database query would be available in your view in <code>$someval</code>.
        Note that in the above code there are no steps to connect to the database. That is because this is done automatically. For this
        to work you must provide your database details in <code>config.php</code>:</p>
        
        <pre><code>$config['db_host'] = ''; // Database host (e.g. localhost)
$config['db_name'] = ''; // Database name
$config['db_username'] = ''; // Database username
$config['db_password'] = ''; // Database password</code></pre>

        <p>There are several helper functions that can also be used in models:</p>
        <ul>
            <li><code>query($query)</code> - Returns an array of results from a query</li>
            <li><code>execute($query)</code> - Returns the direct result from a query</li>
            <li><code>escapeString($string)</code> - Escape strings before using them in queries</li>
        </ul>

        <h4 id="helpersplugins">Helpers & Plugins</h4>
        <p>There are two types of additional resources you can use in JMarcel.</p>
        <ul>
            <li><strong>Helpers</strong> are classes which you can use that don't fall under the category of "controllers". These
            will usually be classes that provide extra functionality that you can use in your controllers. JMarcel ships with two
            helper classes (<code>Session_helper</code> and <code>Url_helper</code>) which are examples of how to use helpers.</li>
            <li><strong>Plugins</strong> are literally any PHP files and can provide any functionality you want. By loading a plugin
            you are simply including the PHP file from the "plugins" folder. This can be useful if you want to use third party 
            libraries in your JMarcel application.</li>
        </ul>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

      <p>Thanks to the following people for contributing to JMarcel:</p>
        <ul>
            <li>João Eira</li>
            <li><a href="http://www.craig-russell.co.uk">Craig Russell</a></li>
            <li>Marcel Anjos</li>
        </ul>
<h3>
<a id="changelog" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changelog</h3>

<p><strong>v0.5</strong> - Initial version.</p>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support or Contact</h3>



      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jhfe">jhfe</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
